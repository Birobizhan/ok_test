# API для расчета процента вхождения аудиторий на основе среднего веса респондентов

Для запуска приложения нужно выполнить команду:
```
docker-compose up
```

## Использование API:

Эндпоинт: GET /getPercent вычисляет процент вхождения второй аудитории в первую на основе среднего веса респондентов

Параметры:
- audience1 (обязательный) - SQL-условие для первой аудитории
- audience2 (обязательный) - SQL-условие для второй аудитории

Примеры запросов:

```
curl "http://localhost/getPercent?audience1=Age%20BETWEEN%2018%20AND%2035&audience2=Sex%20%3D%202"

curl "http://localhost/getPercent?audience1=Sex%20%3D%201%20AND%20Age%20%3E%3D%2025&audience2=Age%20BETWEEN%2030%20AND%2040"
```

Формат ответа:
```
{
"percent":0.43954413320834435
}
```

## Алгоритм расчета

1. Для каждой аудитории фильтруются респонденты по заданным условиям
2. Для каждого респондента вычисляется средний Weight (AVG(Weight) GROUP BY respondent)
3. Находится пересечение респондентов между аудиториями
4. Вычисляется процент: sum(avg_weight пересекающихся) / sum(avg_weight аудитории1)

